"use strict";(self.webpackChunkblog=self.webpackChunkblog||[]).push([[765],{3765:(tt,x,s)=>{s.r(x),s.d(x,{AdminModule:()=>W});var u=s(6895),p=s(1048),t=s(4650),g=s(6311),h=s(7282),l=s(4859),b=s(3683),P=s(7392),r=s(4006);function T(n,a){if(1&n){const e=t.EpF();t.TgZ(0,"input",12),t.NdJ("ngModelChange",function(i){t.CHM(e);const c=t.oxw(2);return t.KtG(c.navSearchInput=i)})("ngModelChange",function(){t.CHM(e);const i=t.oxw(2);return t.KtG(i.onNavSearchInputChange())}),t.qZA()}if(2&n){const e=t.oxw(2);t.Q6J("ngModel",e.navSearchInput)}}function S(n,a){if(1&n){const e=t.EpF();t.TgZ(0,"div",9),t.YNc(1,T,1,1,"input",10),t.TgZ(2,"button",11),t.NdJ("click",function(){t.CHM(e);const i=t.oxw();return t.KtG(i.showInput=!i.showInput)}),t.TgZ(3,"mat-icon"),t._uU(4,"search"),t.qZA()()()}if(2&n){const e=t.oxw();t.xp6(1),t.Q6J("ngIf",e.showInput)}}function y(n,a){1&n&&(t.TgZ(0,"span",13),t._uU(1,"Back"),t.qZA())}function I(n,a){1&n&&(t.TgZ(0,"span",14),t._uU(1,"Posts"),t.qZA())}function O(n,a){1&n&&(t.TgZ(0,"span",15),t._uU(1,"Create"),t.qZA())}function w(n,a){if(1&n){const e=t.EpF();t.TgZ(0,"span",16),t.NdJ("click",function(){t.CHM(e);const i=t.oxw();return t.KtG(i.logout())}),t._uU(1,"logout"),t.qZA()}}const q=function(){return{exact:!0}};let L=(()=>{class n{constructor(e,o){this.auth=e,this.sharedService=o,this.showInput=!1,this.navSearchInput=""}ngOnInit(){}logout(){this.auth.logout()}onNavSearchInputChange(){this.sharedService.navSearchInputSource$.next(this.navSearchInput)}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(g.e),t.Y36(h.F))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-admin-layout"]],decls:13,vars:7,consts:[["color","primary",1,"navBar"],["routerLink","","routerLinkActive","active",3,"routerLinkActiveOptions"],[1,"spacer"],["class","search",4,"ngIf"],["routerLink","/admin/posts",4,"ngIf"],["routerLink","/admin/posts","routerLinkActive","active",4,"ngIf"],["routerLink","/admin/create","routerLinkActive","active",4,"ngIf"],["routerLink","/admin/login","routerLinkActive","active"],[3,"click",4,"ngIf"],[1,"search"],[3,"ngModel","ngModelChange",4,"ngIf"],["mat-icon-button","",3,"click"],[3,"ngModel","ngModelChange"],["routerLink","/admin/posts"],["routerLink","/admin/posts","routerLinkActive","active"],["routerLink","/admin/create","routerLinkActive","active"],[3,"click"]],template:function(e,o){1&e&&(t.TgZ(0,"mat-toolbar",0)(1,"span",1)(2,"h1"),t._uU(3,"Blog"),t.qZA()(),t._UZ(4,"span",2),t.YNc(5,S,5,1,"div",3),t.YNc(6,y,2,0,"span",4),t.YNc(7,I,2,0,"span",5),t.YNc(8,O,2,0,"span",6),t.TgZ(9,"span",7),t._uU(10,"login"),t.qZA(),t.YNc(11,w,2,0,"span",8),t.qZA(),t._UZ(12,"router-outlet")),2&e&&(t.xp6(1),t.Q6J("routerLinkActiveOptions",t.DdM(6,q)),t.xp6(4),t.Q6J("ngIf",o.auth.isAuthenticated()),t.xp6(1),t.Q6J("ngIf",o.auth.isAuthenticated()),t.xp6(1),t.Q6J("ngIf",o.auth.isAuthenticated()),t.xp6(1),t.Q6J("ngIf",o.auth.isAuthenticated()),t.xp6(3),t.Q6J("ngIf",o.auth.isAuthenticated()))},dependencies:[p.lC,p.rH,p.Od,u.O5,l.lW,b.Ye,P.Hw,r.Fj,r.JJ,r.On],styles:[".navBar[_ngcontent-%COMP%]{position:fixed;top:0;left:0;width:100%;z-index:1}span[_ngcontent-%COMP%]{margin:20px}.active[_ngcontent-%COMP%]{color:#c1c1c1}span[_ngcontent-%COMP%]:hover{cursor:pointer}.search[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{border-radius:25px;max-width:150px;text-align:center;width:100%;outline:none;font-size:20px;vertical-align:middle;border:none;padding:0}"]}),n})();var f=s(4051),k=s(7009);let _=(()=>{class n{constructor(e){this.snackBar=e}openSnackBar(e){this.snackBar.open(e,"Close",{duration:3e3})}}return n.\u0275fac=function(e){return new(e||n)(t.LFG(k.ux))},n.\u0275prov=t.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();var d=s(3546),m=s(9549),v=s(4144),Z=s(8985);const J=function(n){return{error:n}},U=function(n){return{"error-quill":n}};let E=(()=>{class n{constructor(e,o){this.postsService=e,this.matSnackBar=o}ngOnInit(){this.form=new r.cw({author:new r.NI("",[r.kI.required]),title:new r.NI("",[r.kI.required]),text:new r.NI("",[r.kI.required])})}submit(){this.form.invalid||(this.createSub=this.postsService.createPost({author:this.form.value.author,title:this.form.value.title,text:this.form.value.text,date:new Date}).subscribe(()=>{this.formDirective.resetForm(),this.matSnackBar.openSnackBar("Post Created !")}))}ngOnDestroy(){this.createSub&&this.createSub.unsubscribe()}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(f.P),t.Y36(_))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-create-page"]],viewQuery:function(e,o){if(1&e&&t.Gf(r.sg,5),2&e){let i;t.iGM(i=t.CRH())&&(o.formDirective=i.first)}},decls:19,vars:8,consts:[[1,"card",3,"formGroup","ngSubmit"],[1,"logForm"],["appearance","fill"],["matInput","","type","text","formControlName","author"],["matInput","","type","text","formControlName","title"],[1,"quill-container"],[3,"ngClass"],["formControlName","text",3,"ngClass"],["mat-flat-button","","color","primary","type","submit",3,"disabled"]],template:function(e,o){if(1&e&&(t.TgZ(0,"form",0),t.NdJ("ngSubmit",function(){return o.submit()}),t.TgZ(1,"mat-card")(2,"div",1)(3,"h1"),t._uU(4,"Create Post"),t.qZA()(),t.TgZ(5,"mat-form-field",2)(6,"mat-label"),t._uU(7,"Post Author"),t.qZA(),t._UZ(8,"input",3),t.qZA(),t.TgZ(9,"mat-form-field",2)(10,"mat-label"),t._uU(11,"Post Title"),t.qZA(),t._UZ(12,"input",4),t.qZA(),t.TgZ(13,"div",5)(14,"label",6),t._uU(15,"Post Text"),t.qZA(),t._UZ(16,"quill-editor",7),t.qZA(),t.TgZ(17,"button",8),t._uU(18,"Create Post"),t.qZA()()()),2&e){let i,c;t.Q6J("formGroup",o.form),t.xp6(14),t.Q6J("ngClass",t.VKq(4,J,(null==(i=o.form.get("text"))?null:i.touched)&&(null==(i=o.form.get("text"))?null:i.invalid))),t.xp6(2),t.Q6J("ngClass",t.VKq(6,U,(null==(c=o.form.get("text"))?null:c.touched)&&(null==(c=o.form.get("text"))?null:c.invalid))),t.xp6(1),t.Q6J("disabled",o.form.invalid)}},dependencies:[u.mk,l.lW,d.a8,m.KE,m.hX,v.Nt,r._Y,r.Fj,r.JJ,r.JL,r.sg,r.u,Z.g6],styles:[".card[_ngcontent-%COMP%]{max-width:800px;margin:0 auto}mat-form-field[_ngcontent-%COMP%]{width:100%}button[_ngcontent-%COMP%]{margin-top:15px}form[_ngcontent-%COMP%]{padding-top:100px}"]}),n})();function N(n,a){if(1&n&&(t.TgZ(0,"div",11),t._uU(1),t.qZA()),2&n){const e=a.ngIf;t.xp6(1),t.Oqu(e)}}function F(n,a){if(1&n&&(t.TgZ(0,"mat-error"),t._uU(1),t.qZA()),2&n){const e=t.oxw();t.xp6(1),t.Oqu(e.getErrorMessageEmail())}}function Y(n,a){if(1&n&&(t.TgZ(0,"mat-error"),t._uU(1),t.qZA()),2&n){const e=t.oxw();t.xp6(1),t.Oqu(e.getErrorMessagePassword())}}const A=function(n){return{error:n}};let Q=(()=>{class n{constructor(e,o){this.authService=e,this.router=o,this.hide=!0,this.passwordResponseError=!1,this.inputResponseError=!1}ngOnInit(){this.form=new r.cw({email:new r.NI("",[r.kI.required,r.kI.email]),password:new r.NI("",[r.kI.required,r.kI.minLength(6)])}),this.authService.getErrorSubject().subscribe(e=>{switch(e){case"Invalid password":this.passwordResponseError=!0,this.inputResponseError=!1;break;case"Wrong email":this.inputResponseError=!0,this.passwordResponseError=!1;break;default:this.passwordResponseError=!1,this.inputResponseError=!1}})}getErrorMessageEmail(){return this.form.get("email")?.hasError("required")?"You must enter a Email":this.form.get("email")?.hasError("email")?"Not a valid email":""}getErrorMessagePassword(){return this.form.get("password")?.hasError("required")?"You must enter a password":this.form.get("password")?.hasError("minlength")?`Current length ${this.form.get("password")?.getError("minlength").actualLength}, required length \n      ${this.form.get("password")?.getError("minlength").requiredLength}`:null}submit(){if(this.form.invalid)return;const e={...this.form.value};this.authService.login(e).subscribe(()=>{this.router.navigate(["/admin","posts"]),this.formDirective.resetForm()})}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(g.e),t.Y36(p.F0))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-login-page"]],viewQuery:function(e,o){if(1&e&&t.Gf(r.sg,5),2&e){let i;t.iGM(i=t.CRH())&&(o.formDirective=i.first)}},decls:24,vars:17,consts:[[3,"formGroup","ngSubmit"],[1,"card"],[1,"logForm"],["class","error",4,"ngIf"],["appearance","fill"],[3,"ngClass"],["matInput","","placeholder","email","formControlName","email","required",""],[4,"ngIf"],["matInput","","placeholder","password","formControlName","password","required","",3,"type"],["type","button","mat-icon-button","","matSuffix","",3,"click"],["type","submit","mat-raised-button","","color","primary",3,"disabled"],[1,"error"]],template:function(e,o){if(1&e&&(t.TgZ(0,"form",0),t.NdJ("ngSubmit",function(){return o.submit()}),t.TgZ(1,"mat-card",1)(2,"div",2)(3,"h1"),t._uU(4,"Lonin Form"),t.qZA(),t.YNc(5,N,2,1,"div",3),t.ALo(6,"async"),t.qZA(),t.TgZ(7,"div")(8,"mat-form-field",4)(9,"mat-label",5),t._uU(10,"Enter your email"),t.qZA(),t._UZ(11,"input",6),t.YNc(12,F,2,1,"mat-error",7),t.qZA()(),t.TgZ(13,"div")(14,"mat-form-field",4)(15,"mat-label",5),t._uU(16,"Enter your password"),t.qZA(),t._UZ(17,"input",8),t.YNc(18,Y,2,1,"mat-error",7),t.TgZ(19,"button",9),t.NdJ("click",function(){return o.hide=!o.hide}),t.TgZ(20,"mat-icon"),t._uU(21),t.qZA()()()(),t.TgZ(22,"button",10),t._uU(23,"Login"),t.qZA()()()),2&e){let i,c;t.Q6J("formGroup",o.form),t.xp6(5),t.Q6J("ngIf",t.lcZ(6,11,o.authService.error$)),t.xp6(4),t.Q6J("ngClass",t.VKq(13,A,o.inputResponseError)),t.xp6(3),t.Q6J("ngIf",null==(i=o.form.get("email"))?null:i.invalid),t.xp6(3),t.Q6J("ngClass",t.VKq(15,A,o.passwordResponseError)),t.xp6(2),t.Q6J("type",o.hide?"password":"text"),t.xp6(1),t.Q6J("ngIf",null==(c=o.form.get("password"))?null:c.invalid),t.xp6(1),t.uIk("aria-label","Hide password")("aria-pressed",o.hide),t.xp6(2),t.Oqu(o.hide?"visibility_off":"visibility"),t.xp6(1),t.Q6J("disabled",o.form.invalid)}},dependencies:[u.mk,u.O5,l.lW,d.a8,m.TO,m.KE,m.hX,m.R9,v.Nt,P.Hw,r._Y,r.Fj,r.JJ,r.JL,r.Q7,r.sg,r.u,u.Ov],styles:[".card[_ngcontent-%COMP%]{max-width:600px;margin:85px auto}mat-form-field[_ngcontent-%COMP%]{width:100%}.logForm[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between}form[_ngcontent-%COMP%]{padding-top:100px}@media (max-width: 620px){.card[_ngcontent-%COMP%]{margin:20px}}"]}),n})();var G=s(4275);let M=(()=>{class n{constructor(e,o){this.authService=e,this.router=o}canActivate(e,o){return!!this.authService.isAuthenticated()||(this.router.navigate(["/admin","login"]),!1)}}return n.\u0275fac=function(e){return new(e||n)(t.LFG(g.e),t.LFG(p.F0))},n.\u0275prov=t.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();var B=s(3900);const K=function(n){return{error:n}},R=function(n){return{"error-quill":n}};function D(n,a){if(1&n){const e=t.EpF();t.TgZ(0,"form",1),t.NdJ("ngSubmit",function(){t.CHM(e);const i=t.oxw();return t.KtG(i.submit())}),t.TgZ(1,"mat-card")(2,"div",2)(3,"h1"),t._uU(4,"Update Post"),t.qZA()(),t.TgZ(5,"mat-form-field",3)(6,"mat-label"),t._uU(7,"Post Title"),t.qZA(),t._UZ(8,"input",4),t.qZA(),t.TgZ(9,"div",5)(10,"label",6),t._uU(11,"Post Text"),t.qZA(),t._UZ(12,"quill-editor",7),t.qZA(),t.TgZ(13,"button",8),t._uU(14,"Update Post"),t.qZA()()()}if(2&n){const e=t.oxw();let o,i;t.Q6J("formGroup",e.form),t.xp6(10),t.Q6J("ngClass",t.VKq(4,K,(null==(o=e.form.get("text"))?null:o.touched)&&(null==(o=e.form.get("text"))?null:o.invalid))),t.xp6(2),t.Q6J("ngClass",t.VKq(6,R,(null==(i=e.form.get("text"))?null:i.touched)&&(null==(i=e.form.get("text"))?null:i.invalid))),t.xp6(1),t.Q6J("disabled",e.form.invalid)}}let H=(()=>{class n{constructor(e,o,i,c){this.postsServices=e,this.route=o,this.router=i,this.matSnackBar=c}ngOnInit(){this.route.params.pipe((0,B.w)(e=>this.postsServices.getPostById(e.id))).subscribe(e=>{this.post=e,this.form=new r.cw({title:new r.NI(e.title,[r.kI.required]),text:new r.NI(e.text,[r.kI.required])})})}submit(){if(this.form.invalid)return;const e={...this.post,text:this.form.value.text,title:this.form.value.title};this.postsServices.upDatePost(e).subscribe(o=>{this.router.navigate(["/admin","posts"]),this.matSnackBar.openSnackBar("Post updated !")})}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(f.P),t.Y36(p.gz),t.Y36(p.F0),t.Y36(_))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-edit-page"]],decls:1,vars:1,consts:[["class","card",3,"formGroup","ngSubmit",4,"ngIf"],[1,"card",3,"formGroup","ngSubmit"],[1,"logForm"],["appearance","fill"],["matInput","","type","text","formControlName","title"],[1,"quill-container"],[3,"ngClass"],["formControlName","text",3,"ngClass"],["mat-flat-button","","color","primary","type","submit",3,"disabled"]],template:function(e,o){1&e&&t.YNc(0,D,15,8,"form",0),2&e&&t.Q6J("ngIf",o.form)},dependencies:[u.mk,u.O5,l.lW,d.a8,m.KE,m.hX,v.Nt,r._Y,r.Fj,r.JJ,r.JL,r.sg,r.u,Z.g6],styles:[".card[_ngcontent-%COMP%]{max-width:800px;margin:85px auto}mat-form-field[_ngcontent-%COMP%]{width:100%}button[_ngcontent-%COMP%]{margin-top:15px}"]}),n})(),j=(()=>{class n{constructor(e){this.shared=e}transform(e,o,i="title"){return o.trim()?e.filter(c=>c[i].toLowerCase().includes(o.toLowerCase())):e}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(h.F,16))},n.\u0275pipe=t.Yjl({name:"adminSearch",type:n,pure:!0}),n})();function z(n,a){if(1&n){const e=t.EpF();t.TgZ(0,"mat-card",5)(1,"div")(2,"h3"),t._uU(3),t.qZA()(),t.TgZ(4,"div")(5,"h3"),t._uU(6),t.qZA()(),t.TgZ(7,"div")(8,"h3"),t._uU(9),t.ALo(10,"date"),t.qZA()(),t.TgZ(11,"div")(12,"h3")(13,"a",6),t.NdJ("click",function(){const c=t.CHM(e).$implicit,C=t.oxw(2);return t.KtG(C.editPost(c.id))}),t._uU(14,"Edit"),t.qZA()(),t.TgZ(15,"h3")(16,"a",6),t.NdJ("click",function(){const c=t.CHM(e).$implicit,C=t.oxw(2);return t.KtG(C.removePost(c.id))}),t._uU(17,"Delete"),t.qZA()()()()}if(2&n){const e=a.$implicit;t.xp6(3),t.Oqu(e.author),t.xp6(3),t.Oqu(e.title),t.xp6(3),t.Oqu(t.lcZ(10,3,e.date))}}function X(n,a){if(1&n&&(t.TgZ(0,"div")(1,"div",2)(2,"mat-card",3)(3,"div")(4,"h1"),t._uU(5,"Author"),t.qZA()(),t.TgZ(6,"div")(7,"h1"),t._uU(8,"Title"),t.qZA()(),t.TgZ(9,"div")(10,"h1"),t._uU(11,"Date"),t.qZA()(),t.TgZ(12,"div")(13,"h1"),t._uU(14,"Action"),t.qZA()()(),t.YNc(15,z,18,5,"mat-card",4),t.ALo(16,"adminSearch"),t.qZA()()),2&n){const e=t.oxw();t.xp6(15),t.Q6J("ngForOf",t.xi3(16,1,e.posts,e.navSearchInput))}}function $(n,a){1&n&&(t.TgZ(0,"h1"),t._uU(1,"Loading..."),t.qZA())}const V=[{path:"",component:L,children:[{path:"posts",component:(()=>{class n{constructor(e,o,i,c){this.postsService=e,this.router=o,this.sharedService=i,this.matSnackBar=c,this.posts=[],this.navSearchInput=""}ngOnInit(){this.getPostSub=this.postsService.getPosts().subscribe(e=>{e.reverse(),this.posts=e}),this.sharedService.navSearchInputSource$.subscribe(e=>{this.navSearchInput=e})}ngOnDestroy(){this.getPostSub&&this.getPostSub.unsubscribe()}editPost(e){this.router.navigate(["/admin","edit",e])}removePost(e){e&&this.postsService.removePost(e).subscribe(()=>{this.posts=this.posts.filter(o=>o.id!=e),this.matSnackBar.openSnackBar("Post Deleted !")})}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(f.P),t.Y36(p.F0),t.Y36(h.F),t.Y36(_))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-main"]],decls:3,vars:2,consts:[[4,"ngIf","ngIfElse"],["load",""],[1,"card"],[1,"home-posts-header-grid"],["class","home-posts-grid",4,"ngFor","ngForOf"],[1,"home-posts-grid"],[3,"click"]],template:function(e,o){if(1&e&&(t.YNc(0,X,17,4,"div",0),t.YNc(1,$,2,0,"ng-template",null,1,t.W1O)),2&e){const i=t.MAs(2);t.Q6J("ngIf",o.posts.length)("ngIfElse",i)}},dependencies:[u.sg,u.O5,d.a8,u.uU,j],styles:[".card[_ngcontent-%COMP%]{max-width:800px;margin:0 auto;padding:60px 0}.home-posts-header-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr 1fr 1fr 1fr;max-width:800px;margin:0 auto;background:#F6F5F6;padding:0 16px;position:sticky;top:64px;z-index:1}.home-posts-header-grid[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center}.home-posts-header-grid[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{margin:10px}.home-posts-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr 1fr 1fr 1fr;max-width:800px;margin:50px auto}.home-posts-grid[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center}.home-posts-grid[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:8px 0}.home-posts-grid[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{text-decoration:none;background:#989696;color:#fff;border-radius:5px;padding:5px;cursor:pointer}.home-posts-grid[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{opacity:.8}.home-posts-grid[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:nth-child(4){display:flex}.home-posts-grid[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:nth-child(4)   h3[_ngcontent-%COMP%]{margin:0 20px}.home-posts-grid[_ngcontent-%COMP%]   mat-card[_ngcontent-%COMP%]{z-index:-1}"]}),n})()},{path:"login",component:Q},{path:"create",component:E,canActivate:[M]},{path:"edit/:id",component:H,canActivate:[M]}]}];let W=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[p.Bz.forChild(V),u.ez,G.m]}),n})()}}]);